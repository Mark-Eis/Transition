<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Converting numeric values to class Date • Transition</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Converting numeric values to class Date">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Transition</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/convertDate.html">Converting numeric values to class Date</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Converting numeric values to class Date</h1>
            
      

      <div class="d-none name"><code>convertDate.Rmd</code></div>
    </div>

    
    
<p>Copyright (c) 2026 Mark Eisler and Ana Rabaza</p>
<div class="section level2">
<h2 id="introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>For each observation of a subject in a longitudinal study data set,
the main <strong>Transition</strong> package functions
<code><a href="../reference/PreviousDate.html">add_prev_date()</a></code>, <code><a href="../reference/PreviousResult.html">add_prev_result()</a></code> and
<code><a href="../reference/Transitions.html">add_transitions()</a></code> all need to identify the previous
observation for that same subject, if any. For compatibility with these
<strong>Transition</strong> package functions, the timings of
observations in a dataset, each referred to as a <code>timepoint</code>,
should be coded within the data frame as a column of R class <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Dates.html" class="external-link"><code>"Date"</code></a>,
representing calendar dates.</p>
<p>This vignette explains how timepoints represented by numeric values
in data may easily be converted to class <code>"Date"</code>, using the
R <strong>base</strong> package function <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/as.Date.html" class="external-link"><code>as.Date()</code></a>.</p>
</div>
<div class="section level2">
<h2 id="convert-numeric-values-representing-year-to-class-date">2. Convert numeric values representing year to class
<code>"Date"</code><a class="anchor" aria-label="anchor" href="#convert-numeric-values-representing-year-to-class-date"></a>
</h2>
<p>We start by creating an example data frame of longitudinal data for
three subjects, containing years 2018 to 2025 as numeric values and with
observations having one of three possible ordinal values: –</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        subject <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1001</span><span class="op">:</span><span class="fl">1003</span><span class="op">)</span>,</span>
<span>        timepoint <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2018</span><span class="op">:</span><span class="fl">2025</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>        result <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/gl.html" class="external-link">gl</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, lab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"good"</span>, <span class="st">"bad"</span>, <span class="st">"ugly"</span><span class="op">)</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject timepoint result</span></span>
<span><span class="co">#&gt; 1     1001      2018   good</span></span>
<span><span class="co">#&gt; 2     1002      2018   good</span></span>
<span><span class="co">#&gt; 3     1003      2018   good</span></span>
<span><span class="co">#&gt; 4     1001      2019   good</span></span>
<span><span class="co">#&gt; 5     1002      2019    bad</span></span>
<span><span class="co">#&gt; 6     1003      2019    bad</span></span>
<span><span class="co">#&gt; 7     1001      2020    bad</span></span>
<span><span class="co">#&gt; 8     1002      2020    bad</span></span>
<span><span class="co">#&gt; 9     1003      2020   ugly</span></span>
<span><span class="co">#&gt; 10    1001      2021   ugly</span></span>
<span><span class="co">#&gt; 11    1002      2021   ugly</span></span>
<span><span class="co">#&gt; 12    1003      2021   ugly</span></span>
<span><span class="co">#&gt; 13    1001      2022   good</span></span>
<span><span class="co">#&gt; 14    1002      2022   good</span></span>
<span><span class="co">#&gt; 15    1003      2022   good</span></span>
<span><span class="co">#&gt; 16    1001      2023   good</span></span>
<span><span class="co">#&gt; 17    1002      2023    bad</span></span>
<span><span class="co">#&gt; 18    1003      2023    bad</span></span>
<span><span class="co">#&gt; 19    1001      2024    bad</span></span>
<span><span class="co">#&gt; 20    1002      2024    bad</span></span>
<span><span class="co">#&gt; 21    1003      2024   ugly</span></span>
<span><span class="co">#&gt; 22    1001      2025   ugly</span></span>
<span><span class="co">#&gt; 23    1002      2025   ugly</span></span>
<span><span class="co">#&gt; 24    1003      2025   ugly</span></span></code></pre></div>
<p>We convert the numeric values for year in the <code>timepoint</code>
column to class <code>"Date"</code>, using <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/as.Date.html" class="external-link"><code>as.Date()</code></a>
with consistent arbitrary values of January 1st for month and day: –</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span></span>
<span>        <span class="va">df</span>,</span>
<span>        timepoint <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">timepoint</span>, <span class="st">"01"</span>, <span class="st">"01"</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject  timepoint result</span></span>
<span><span class="co">#&gt; 1     1001 2018-01-01   good</span></span>
<span><span class="co">#&gt; 2     1002 2018-01-01   good</span></span>
<span><span class="co">#&gt; 3     1003 2018-01-01   good</span></span>
<span><span class="co">#&gt; 4     1001 2019-01-01   good</span></span>
<span><span class="co">#&gt; 5     1002 2019-01-01    bad</span></span>
<span><span class="co">#&gt; 6     1003 2019-01-01    bad</span></span>
<span><span class="co">#&gt; 7     1001 2020-01-01    bad</span></span>
<span><span class="co">#&gt; 8     1002 2020-01-01    bad</span></span>
<span><span class="co">#&gt; 9     1003 2020-01-01   ugly</span></span>
<span><span class="co">#&gt; 10    1001 2021-01-01   ugly</span></span>
<span><span class="co">#&gt; 11    1002 2021-01-01   ugly</span></span>
<span><span class="co">#&gt; 12    1003 2021-01-01   ugly</span></span>
<span><span class="co">#&gt; 13    1001 2022-01-01   good</span></span>
<span><span class="co">#&gt; 14    1002 2022-01-01   good</span></span>
<span><span class="co">#&gt; 15    1003 2022-01-01   good</span></span>
<span><span class="co">#&gt; 16    1001 2023-01-01   good</span></span>
<span><span class="co">#&gt; 17    1002 2023-01-01    bad</span></span>
<span><span class="co">#&gt; 18    1003 2023-01-01    bad</span></span>
<span><span class="co">#&gt; 19    1001 2024-01-01    bad</span></span>
<span><span class="co">#&gt; 20    1002 2024-01-01    bad</span></span>
<span><span class="co">#&gt; 21    1003 2024-01-01   ugly</span></span>
<span><span class="co">#&gt; 22    1001 2025-01-01   ugly</span></span>
<span><span class="co">#&gt; 23    1002 2025-01-01   ugly</span></span>
<span><span class="co">#&gt; 24    1003 2025-01-01   ugly</span></span></code></pre></div>
<p>We can now use the <code><a href="../reference/PreviousResult.html">add_prev_result()</a></code> function with
default values for all but the first argument <code>object</code>—a
<code>data.frame</code> (or a subclass thereof)—to add a column of
results from the previous observation: –</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/PreviousResult.html">add_prev_result</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject  timepoint result prev_result</span></span>
<span><span class="co">#&gt; 1     1001 2018-01-01   good        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2     1002 2018-01-01   good        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3     1003 2018-01-01   good        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4     1001 2019-01-01   good        good</span></span>
<span><span class="co">#&gt; 5     1002 2019-01-01    bad        good</span></span>
<span><span class="co">#&gt; 6     1003 2019-01-01    bad        good</span></span>
<span><span class="co">#&gt; 7     1001 2020-01-01    bad        good</span></span>
<span><span class="co">#&gt; 8     1002 2020-01-01    bad         bad</span></span>
<span><span class="co">#&gt; 9     1003 2020-01-01   ugly         bad</span></span>
<span><span class="co">#&gt; 10    1001 2021-01-01   ugly         bad</span></span>
<span><span class="co">#&gt; 11    1002 2021-01-01   ugly         bad</span></span>
<span><span class="co">#&gt; 12    1003 2021-01-01   ugly        ugly</span></span>
<span><span class="co">#&gt; 13    1001 2022-01-01   good        ugly</span></span>
<span><span class="co">#&gt; 14    1002 2022-01-01   good        ugly</span></span>
<span><span class="co">#&gt; 15    1003 2022-01-01   good        ugly</span></span>
<span><span class="co">#&gt; 16    1001 2023-01-01   good        good</span></span>
<span><span class="co">#&gt; 17    1002 2023-01-01    bad        good</span></span>
<span><span class="co">#&gt; 18    1003 2023-01-01    bad        good</span></span>
<span><span class="co">#&gt; 19    1001 2024-01-01    bad        good</span></span>
<span><span class="co">#&gt; 20    1002 2024-01-01    bad         bad</span></span>
<span><span class="co">#&gt; 21    1003 2024-01-01   ugly         bad</span></span>
<span><span class="co">#&gt; 22    1001 2025-01-01   ugly         bad</span></span>
<span><span class="co">#&gt; 23    1002 2025-01-01   ugly         bad</span></span>
<span><span class="co">#&gt; 24    1003 2025-01-01   ugly        ugly</span></span></code></pre></div>
<p>Finally, we can format the class <code>"Date"</code>
<code>timepoint</code> column to show just the year, as in the original
data: –</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">df</span>, timepoint <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">timepoint</span>, <span class="st">"%Y"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject timepoint result prev_result</span></span>
<span><span class="co">#&gt; 1     1001      2018   good        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2     1002      2018   good        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3     1003      2018   good        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4     1001      2019   good        good</span></span>
<span><span class="co">#&gt; 5     1002      2019    bad        good</span></span>
<span><span class="co">#&gt; 6     1003      2019    bad        good</span></span>
<span><span class="co">#&gt; 7     1001      2020    bad        good</span></span>
<span><span class="co">#&gt; 8     1002      2020    bad         bad</span></span>
<span><span class="co">#&gt; 9     1003      2020   ugly         bad</span></span>
<span><span class="co">#&gt; 10    1001      2021   ugly         bad</span></span>
<span><span class="co">#&gt; 11    1002      2021   ugly         bad</span></span>
<span><span class="co">#&gt; 12    1003      2021   ugly        ugly</span></span>
<span><span class="co">#&gt; 13    1001      2022   good        ugly</span></span>
<span><span class="co">#&gt; 14    1002      2022   good        ugly</span></span>
<span><span class="co">#&gt; 15    1003      2022   good        ugly</span></span>
<span><span class="co">#&gt; 16    1001      2023   good        good</span></span>
<span><span class="co">#&gt; 17    1002      2023    bad        good</span></span>
<span><span class="co">#&gt; 18    1003      2023    bad        good</span></span>
<span><span class="co">#&gt; 19    1001      2024    bad        good</span></span>
<span><span class="co">#&gt; 20    1002      2024    bad         bad</span></span>
<span><span class="co">#&gt; 21    1003      2024   ugly         bad</span></span>
<span><span class="co">#&gt; 22    1001      2025   ugly         bad</span></span>
<span><span class="co">#&gt; 23    1002      2025   ugly         bad</span></span>
<span><span class="co">#&gt; 24    1003      2025   ugly        ugly</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="convert-numeric-values-representing-year-and-month-to-class-date">3. Convert numeric values representing year and month to class
<code>"Date"</code><a class="anchor" aria-label="anchor" href="#convert-numeric-values-representing-year-and-month-to-class-date"></a>
</h2>
<p>We create another example data frame of longitudinal data for two
subjects, containing year and month from July 2024 to June 2025 as
numeric values, and with observations having one of two possible ordinal
values: –</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        subject <span class="op">=</span> <span class="fl">1001</span><span class="op">:</span><span class="fl">1002</span>,</span>
<span>        year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2024</span><span class="op">:</span><span class="fl">2025</span>, each <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>        month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="fl">12</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>        result <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/gl.html" class="external-link">gl</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, lab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"low"</span>, <span class="st">"high"</span><span class="op">)</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject year month result</span></span>
<span><span class="co">#&gt; 1     1001 2024     7    low</span></span>
<span><span class="co">#&gt; 2     1002 2024     7    low</span></span>
<span><span class="co">#&gt; 3     1001 2024     8    low</span></span>
<span><span class="co">#&gt; 4     1002 2024     8   high</span></span>
<span><span class="co">#&gt; 5     1001 2024     9   high</span></span>
<span><span class="co">#&gt; 6     1002 2024     9   high</span></span>
<span><span class="co">#&gt; 7     1001 2024    10    low</span></span>
<span><span class="co">#&gt; 8     1002 2024    10    low</span></span>
<span><span class="co">#&gt; 9     1001 2024    11    low</span></span>
<span><span class="co">#&gt; 10    1002 2024    11   high</span></span>
<span><span class="co">#&gt; 11    1001 2024    12   high</span></span>
<span><span class="co">#&gt; 12    1002 2024    12   high</span></span>
<span><span class="co">#&gt; 13    1001 2025     1    low</span></span>
<span><span class="co">#&gt; 14    1002 2025     1    low</span></span>
<span><span class="co">#&gt; 15    1001 2025     2    low</span></span>
<span><span class="co">#&gt; 16    1002 2025     2   high</span></span>
<span><span class="co">#&gt; 17    1001 2025     3   high</span></span>
<span><span class="co">#&gt; 18    1002 2025     3   high</span></span>
<span><span class="co">#&gt; 19    1001 2025     4    low</span></span>
<span><span class="co">#&gt; 20    1002 2025     4    low</span></span>
<span><span class="co">#&gt; 21    1001 2025     5    low</span></span>
<span><span class="co">#&gt; 22    1002 2025     5   high</span></span>
<span><span class="co">#&gt; 23    1001 2025     6   high</span></span>
<span><span class="co">#&gt; 24    1002 2025     6   high</span></span></code></pre></div>
<p>We convert the numeric values for year and month to class
<code>"Date"</code>, using <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/as.Date.html" class="external-link"><code>as.Date()</code></a>
with a consistent arbitrary value of 1st for day of the month: –</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span></span>
<span>        <span class="va">df</span>,</span>
<span>        timepoint <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span>, <span class="st">"01"</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        month <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject result  timepoint</span></span>
<span><span class="co">#&gt; 1     1001    low 2024-07-01</span></span>
<span><span class="co">#&gt; 2     1002    low 2024-07-01</span></span>
<span><span class="co">#&gt; 3     1001    low 2024-08-01</span></span>
<span><span class="co">#&gt; 4     1002   high 2024-08-01</span></span>
<span><span class="co">#&gt; 5     1001   high 2024-09-01</span></span>
<span><span class="co">#&gt; 6     1002   high 2024-09-01</span></span>
<span><span class="co">#&gt; 7     1001    low 2024-10-01</span></span>
<span><span class="co">#&gt; 8     1002    low 2024-10-01</span></span>
<span><span class="co">#&gt; 9     1001    low 2024-11-01</span></span>
<span><span class="co">#&gt; 10    1002   high 2024-11-01</span></span>
<span><span class="co">#&gt; 11    1001   high 2024-12-01</span></span>
<span><span class="co">#&gt; 12    1002   high 2024-12-01</span></span>
<span><span class="co">#&gt; 13    1001    low 2025-01-01</span></span>
<span><span class="co">#&gt; 14    1002    low 2025-01-01</span></span>
<span><span class="co">#&gt; 15    1001    low 2025-02-01</span></span>
<span><span class="co">#&gt; 16    1002   high 2025-02-01</span></span>
<span><span class="co">#&gt; 17    1001   high 2025-03-01</span></span>
<span><span class="co">#&gt; 18    1002   high 2025-03-01</span></span>
<span><span class="co">#&gt; 19    1001    low 2025-04-01</span></span>
<span><span class="co">#&gt; 20    1002    low 2025-04-01</span></span>
<span><span class="co">#&gt; 21    1001    low 2025-05-01</span></span>
<span><span class="co">#&gt; 22    1002   high 2025-05-01</span></span>
<span><span class="co">#&gt; 23    1001   high 2025-06-01</span></span>
<span><span class="co">#&gt; 24    1002   high 2025-06-01</span></span></code></pre></div>
<p>We can now use the <code><a href="../reference/Transitions.html">add_transitions()</a></code> function with
default values for all but the first argument to add a column of
transitions: –</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Transitions.html">add_transitions</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject result  timepoint transition</span></span>
<span><span class="co">#&gt; 1     1001    low 2024-07-01         NA</span></span>
<span><span class="co">#&gt; 2     1002    low 2024-07-01         NA</span></span>
<span><span class="co">#&gt; 3     1001    low 2024-08-01          0</span></span>
<span><span class="co">#&gt; 4     1002   high 2024-08-01          1</span></span>
<span><span class="co">#&gt; 5     1001   high 2024-09-01          1</span></span>
<span><span class="co">#&gt; 6     1002   high 2024-09-01          0</span></span>
<span><span class="co">#&gt; 7     1001    low 2024-10-01         -1</span></span>
<span><span class="co">#&gt; 8     1002    low 2024-10-01         -1</span></span>
<span><span class="co">#&gt; 9     1001    low 2024-11-01          0</span></span>
<span><span class="co">#&gt; 10    1002   high 2024-11-01          1</span></span>
<span><span class="co">#&gt; 11    1001   high 2024-12-01          1</span></span>
<span><span class="co">#&gt; 12    1002   high 2024-12-01          0</span></span>
<span><span class="co">#&gt; 13    1001    low 2025-01-01         -1</span></span>
<span><span class="co">#&gt; 14    1002    low 2025-01-01         -1</span></span>
<span><span class="co">#&gt; 15    1001    low 2025-02-01          0</span></span>
<span><span class="co">#&gt; 16    1002   high 2025-02-01          1</span></span>
<span><span class="co">#&gt; 17    1001   high 2025-03-01          1</span></span>
<span><span class="co">#&gt; 18    1002   high 2025-03-01          0</span></span>
<span><span class="co">#&gt; 19    1001    low 2025-04-01         -1</span></span>
<span><span class="co">#&gt; 20    1002    low 2025-04-01         -1</span></span>
<span><span class="co">#&gt; 21    1001    low 2025-05-01          0</span></span>
<span><span class="co">#&gt; 22    1002   high 2025-05-01          1</span></span>
<span><span class="co">#&gt; 23    1001   high 2025-06-01          1</span></span>
<span><span class="co">#&gt; 24    1002   high 2025-06-01          0</span></span></code></pre></div>
<p>Finally, we can format the class <code>"Date"</code>
<code>timepoint</code> column to show just the month and year, as in the
original data: –</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">df</span>, timepoint <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">timepoint</span>, <span class="st">"%b-%Y"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject result timepoint transition</span></span>
<span><span class="co">#&gt; 1     1001    low  Jul-2024         NA</span></span>
<span><span class="co">#&gt; 2     1002    low  Jul-2024         NA</span></span>
<span><span class="co">#&gt; 3     1001    low  Aug-2024          0</span></span>
<span><span class="co">#&gt; 4     1002   high  Aug-2024          1</span></span>
<span><span class="co">#&gt; 5     1001   high  Sep-2024          1</span></span>
<span><span class="co">#&gt; 6     1002   high  Sep-2024          0</span></span>
<span><span class="co">#&gt; 7     1001    low  Oct-2024         -1</span></span>
<span><span class="co">#&gt; 8     1002    low  Oct-2024         -1</span></span>
<span><span class="co">#&gt; 9     1001    low  Nov-2024          0</span></span>
<span><span class="co">#&gt; 10    1002   high  Nov-2024          1</span></span>
<span><span class="co">#&gt; 11    1001   high  Dec-2024          1</span></span>
<span><span class="co">#&gt; 12    1002   high  Dec-2024          0</span></span>
<span><span class="co">#&gt; 13    1001    low  Jan-2025         -1</span></span>
<span><span class="co">#&gt; 14    1002    low  Jan-2025         -1</span></span>
<span><span class="co">#&gt; 15    1001    low  Feb-2025          0</span></span>
<span><span class="co">#&gt; 16    1002   high  Feb-2025          1</span></span>
<span><span class="co">#&gt; 17    1001   high  Mar-2025          1</span></span>
<span><span class="co">#&gt; 18    1002   high  Mar-2025          0</span></span>
<span><span class="co">#&gt; 19    1001    low  Apr-2025         -1</span></span>
<span><span class="co">#&gt; 20    1002    low  Apr-2025         -1</span></span>
<span><span class="co">#&gt; 21    1001    low  May-2025          0</span></span>
<span><span class="co">#&gt; 22    1002   high  May-2025          1</span></span>
<span><span class="co">#&gt; 23    1001   high  Jun-2025          1</span></span>
<span><span class="co">#&gt; 24    1002   high  Jun-2025          0</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="convert-numeric-values-representing-ages-to-class-date">4. Convert numeric values representing ages to class
<code>"Date"</code><a class="anchor" aria-label="anchor" href="#convert-numeric-values-representing-ages-to-class-date"></a>
</h2>
<p>We inspect the first 22 rows of the <code>Blackmore</code> data,
which includes numeric values for age in years rather than dates: –</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Blackmore</span>, <span class="fl">22</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject   age exercise   group</span></span>
<span><span class="co">#&gt; 1      100  8.00     2.71 patient</span></span>
<span><span class="co">#&gt; 2      100 10.00     1.94 patient</span></span>
<span><span class="co">#&gt; 3      100 12.00     2.36 patient</span></span>
<span><span class="co">#&gt; 4      100 14.00     1.54 patient</span></span>
<span><span class="co">#&gt; 5      100 15.92     8.63 patient</span></span>
<span><span class="co">#&gt; 6      101  8.00     0.14 patient</span></span>
<span><span class="co">#&gt; 7      101 10.00     0.14 patient</span></span>
<span><span class="co">#&gt; 8      101 12.00     0.00 patient</span></span>
<span><span class="co">#&gt; 9      101 14.00     0.00 patient</span></span>
<span><span class="co">#&gt; 10     101 16.67     5.08 patient</span></span>
<span><span class="co">#&gt; 11     102  8.00     0.92 patient</span></span>
<span><span class="co">#&gt; 12     102 10.00     1.82 patient</span></span>
<span><span class="co">#&gt; 13     102 12.00     4.75 patient</span></span>
<span><span class="co">#&gt; 14     102 15.08    24.72 patient</span></span>
<span><span class="co">#&gt; 15     103  8.00     1.04 patient</span></span>
<span><span class="co">#&gt; 16     103 10.00     2.90 patient</span></span>
<span><span class="co">#&gt; 17     103 12.00     2.65 patient</span></span>
<span><span class="co">#&gt; 18     103 14.08     6.86 patient</span></span>
<span><span class="co">#&gt; 19     104  8.00     2.75 patient</span></span>
<span><span class="co">#&gt; 20     104 10.00     6.62 patient</span></span>
<span><span class="co">#&gt; 21     104 12.00     0.29 patient</span></span>
<span><span class="co">#&gt; 22     104 15.42    12.37 patient</span></span></code></pre></div>
<p>We shall use the <code><a href="../reference/PreviousDate.html">add_prev_date()</a></code> function to add a
column of previous test dates. For the <code>timepoint</code> argument,
we convert the age values to class <code>"Date"</code> using <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/as.Date.html" class="external-link"><code>as.Date()</code></a>
and an arbitrary “origin” of 1st January 2000<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;This is equivalent to assuming all subjects were born on
the 1st January 2000, which is permissible so long as these dates are
not used for any purpose other than that shown here.&lt;/p&gt;"><sup>1</sup></a>, to which we add the
age in days<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;This works because class &lt;code&gt;"Date"&lt;/code&gt; is
represented internally in days and has a method for the &lt;code&gt;+&lt;/code&gt;
operator that returns a date.&lt;/p&gt;'><sup>2</sup></a> calculated as <code>365.25 * age</code> (in
years).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Blackmore</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span></span>
<span>        <span class="va">Blackmore</span>,</span>
<span>        timepoint <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2000-01-01"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">365.25</span> <span class="op">*</span> <span class="va">age</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Blackmore</span>, <span class="fl">22</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject   age exercise   group  timepoint</span></span>
<span><span class="co">#&gt; 1      100  8.00     2.71 patient 2008-01-01</span></span>
<span><span class="co">#&gt; 2      100 10.00     1.94 patient 2009-12-31</span></span>
<span><span class="co">#&gt; 3      100 12.00     2.36 patient 2012-01-01</span></span>
<span><span class="co">#&gt; 4      100 14.00     1.54 patient 2014-01-01</span></span>
<span><span class="co">#&gt; 5      100 15.92     8.63 patient 2015-12-03</span></span>
<span><span class="co">#&gt; 6      101  8.00     0.14 patient 2008-01-01</span></span>
<span><span class="co">#&gt; 7      101 10.00     0.14 patient 2009-12-31</span></span>
<span><span class="co">#&gt; 8      101 12.00     0.00 patient 2012-01-01</span></span>
<span><span class="co">#&gt; 9      101 14.00     0.00 patient 2014-01-01</span></span>
<span><span class="co">#&gt; 10     101 16.67     5.08 patient 2016-09-02</span></span>
<span><span class="co">#&gt; 11     102  8.00     0.92 patient 2008-01-01</span></span>
<span><span class="co">#&gt; 12     102 10.00     1.82 patient 2009-12-31</span></span>
<span><span class="co">#&gt; 13     102 12.00     4.75 patient 2012-01-01</span></span>
<span><span class="co">#&gt; 14     102 15.08    24.72 patient 2015-01-30</span></span>
<span><span class="co">#&gt; 15     103  8.00     1.04 patient 2008-01-01</span></span>
<span><span class="co">#&gt; 16     103 10.00     2.90 patient 2009-12-31</span></span>
<span><span class="co">#&gt; 17     103 12.00     2.65 patient 2012-01-01</span></span>
<span><span class="co">#&gt; 18     103 14.08     6.86 patient 2014-01-30</span></span>
<span><span class="co">#&gt; 19     104  8.00     2.75 patient 2008-01-01</span></span>
<span><span class="co">#&gt; 20     104 10.00     6.62 patient 2009-12-31</span></span>
<span><span class="co">#&gt; 21     104 12.00     0.29 patient 2012-01-01</span></span>
<span><span class="co">#&gt; 22     104 15.42    12.37 patient 2015-06-03</span></span></code></pre></div>
<p>To use the <code><a href="../reference/PreviousDate.html">add_prev_date()</a></code> function, we need to provide
a <code>result</code> argument in one of two permissible formats—an
ordered factor, or binary data with values of either 1 or 0; note that
the <code>exercise</code> column is neither of these. Since we shall not
be using the values of the <code>exercise</code> column for this
demonstration, we simply add a dummy <code>result</code> column with
values all <code>integer</code> 0: –</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Blackmore</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">Blackmore</span>, result <span class="op">=</span> <span class="fl">0L</span><span class="op">)</span></span></code></pre></div>
<p>We can now use <code><a href="../reference/PreviousDate.html">add_prev_date()</a></code> with default values for
all but the first argument: –</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Blackmore</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/PreviousDate.html">add_prev_date</a></span><span class="op">(</span><span class="va">Blackmore</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Blackmore</span>, <span class="fl">22</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject   age exercise   group  timepoint result  prev_date</span></span>
<span><span class="co">#&gt; 1      100  8.00     2.71 patient 2008-01-01      0       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2      100 10.00     1.94 patient 2009-12-31      0 2008-01-01</span></span>
<span><span class="co">#&gt; 3      100 12.00     2.36 patient 2012-01-01      0 2009-12-31</span></span>
<span><span class="co">#&gt; 4      100 14.00     1.54 patient 2014-01-01      0 2012-01-01</span></span>
<span><span class="co">#&gt; 5      100 15.92     8.63 patient 2015-12-03      0 2014-01-01</span></span>
<span><span class="co">#&gt; 6      101  8.00     0.14 patient 2008-01-01      0       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7      101 10.00     0.14 patient 2009-12-31      0 2008-01-01</span></span>
<span><span class="co">#&gt; 8      101 12.00     0.00 patient 2012-01-01      0 2009-12-31</span></span>
<span><span class="co">#&gt; 9      101 14.00     0.00 patient 2014-01-01      0 2012-01-01</span></span>
<span><span class="co">#&gt; 10     101 16.67     5.08 patient 2016-09-02      0 2014-01-01</span></span>
<span><span class="co">#&gt; 11     102  8.00     0.92 patient 2008-01-01      0       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 12     102 10.00     1.82 patient 2009-12-31      0 2008-01-01</span></span>
<span><span class="co">#&gt; 13     102 12.00     4.75 patient 2012-01-01      0 2009-12-31</span></span>
<span><span class="co">#&gt; 14     102 15.08    24.72 patient 2015-01-30      0 2012-01-01</span></span>
<span><span class="co">#&gt; 15     103  8.00     1.04 patient 2008-01-01      0       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 16     103 10.00     2.90 patient 2009-12-31      0 2008-01-01</span></span>
<span><span class="co">#&gt; 17     103 12.00     2.65 patient 2012-01-01      0 2009-12-31</span></span>
<span><span class="co">#&gt; 18     103 14.08     6.86 patient 2014-01-30      0 2012-01-01</span></span>
<span><span class="co">#&gt; 19     104  8.00     2.75 patient 2008-01-01      0       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 20     104 10.00     6.62 patient 2009-12-31      0 2008-01-01</span></span>
<span><span class="co">#&gt; 21     104 12.00     0.29 patient 2012-01-01      0 2009-12-31</span></span>
<span><span class="co">#&gt; 22     104 15.42    12.37 patient 2015-06-03      0 2012-01-01</span></span></code></pre></div>
<p>Finally, to be consistent with the original data, we can calculate a
<code>prev_age</code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Note that by default, R formats the &lt;code&gt;age&lt;/code&gt;
column to two decimal places because some ages in the
&lt;code&gt;Blackmore&lt;/code&gt; dataset are not whole numbers of years. These
non-whole number ages are always the last observation for an individual.
Consequently, all “previous ages” are indeed whole numbers and R formats
the &lt;code&gt;prev_age&lt;/code&gt; column without showing any decimal places.&lt;/p&gt;"><sup>3</sup></a> column from the <code>prev_date</code>
column, which itself can be removed along with the now superfluous
<code>timepoint</code> and <code>result</code> columns: –</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Blackmore</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span></span>
<span>        <span class="va">Blackmore</span>,</span>
<span>        prev_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">prev_date</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2000-01-01"</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">365.25</span>, <span class="fl">2</span></span>
<span>            <span class="op">)</span>,</span>
<span>        timepoint <span class="op">=</span> <span class="cn">NULL</span>, result <span class="op">=</span> <span class="cn">NULL</span>, prev_date <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Blackmore</span>, <span class="fl">22</span><span class="op">)</span></span>
<span><span class="co">#&gt;    subject   age exercise   group prev_age</span></span>
<span><span class="co">#&gt; 1      100  8.00     2.71 patient       NA</span></span>
<span><span class="co">#&gt; 2      100 10.00     1.94 patient        8</span></span>
<span><span class="co">#&gt; 3      100 12.00     2.36 patient       10</span></span>
<span><span class="co">#&gt; 4      100 14.00     1.54 patient       12</span></span>
<span><span class="co">#&gt; 5      100 15.92     8.63 patient       14</span></span>
<span><span class="co">#&gt; 6      101  8.00     0.14 patient       NA</span></span>
<span><span class="co">#&gt; 7      101 10.00     0.14 patient        8</span></span>
<span><span class="co">#&gt; 8      101 12.00     0.00 patient       10</span></span>
<span><span class="co">#&gt; 9      101 14.00     0.00 patient       12</span></span>
<span><span class="co">#&gt; 10     101 16.67     5.08 patient       14</span></span>
<span><span class="co">#&gt; 11     102  8.00     0.92 patient       NA</span></span>
<span><span class="co">#&gt; 12     102 10.00     1.82 patient        8</span></span>
<span><span class="co">#&gt; 13     102 12.00     4.75 patient       10</span></span>
<span><span class="co">#&gt; 14     102 15.08    24.72 patient       12</span></span>
<span><span class="co">#&gt; 15     103  8.00     1.04 patient       NA</span></span>
<span><span class="co">#&gt; 16     103 10.00     2.90 patient        8</span></span>
<span><span class="co">#&gt; 17     103 12.00     2.65 patient       10</span></span>
<span><span class="co">#&gt; 18     103 14.08     6.86 patient       12</span></span>
<span><span class="co">#&gt; 19     104  8.00     2.75 patient       NA</span></span>
<span><span class="co">#&gt; 20     104 10.00     6.62 patient        8</span></span>
<span><span class="co">#&gt; 21     104 12.00     0.29 patient       10</span></span>
<span><span class="co">#&gt; 22     104 15.42    12.37 patient       12</span></span></code></pre></div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Eisler, Ana Rabaza.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
